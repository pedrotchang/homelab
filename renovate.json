{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "schedule": [
    "after 3am and before 4am on wednesday"
  ],
  "enabledManagers": [
    "flux",
    "kubernetes"
  ],
  "flux": {
    "managerFilePatterns": [
      "/(^|/)infrastructure/.+\\.ya?ml$/",
      "/(^|/)clusters/.+\\.ya?ml$/"
    ]
  },
  "kubernetes": {
    "managerFilePatterns": [
      "/(^|/)infrastructure/.+\\.ya?ml$/",
      "/(^|/)clusters/.+\\.ya?ml$/",
      "/(^|/)apps/.+\\.ya?ml$/"
    ]
  },
  "packageRules": [
    {
      "description": "Immich images - group server and ML together",
      "matchPackagePatterns": ["^ghcr.io/immich-app/"],
      "groupName": "immich",
      "versioning": "semver-coerced"
    }
  ]
}
