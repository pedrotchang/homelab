apiVersion: v1
kind: ConfigMap
metadata:
  name: forgejo-runner-config
data:
  config.yaml: |
    log:
      level: info

    runner:
      file: .runner
      capacity: 1
      timeout: 3h
      insecure: false
      fetch_timeout: 5s
      fetch_interval: 2s
      envs:
        DOCKER_HOST: tcp://localhost:2375
      labels:
        # node:20-bookworm (~300MB) instead of catthehacker/ubuntu:act-22.04 (~1.5GB)
        # Use act-22.04 only if you need apt packages like build-essential, python, etc.
        - "docker:docker://node:20-bookworm"
        - "ubuntu-latest:docker://node:20-bookworm"
        - "hugo:docker://floryn90/hugo:0.145.0-ext-alpine"

    cache:
      enabled: true
      dir: /data/cache

    container:
      network: host
      privileged: false
      options:
      valid_volumes: []
      docker_host: tcp://localhost:2375
